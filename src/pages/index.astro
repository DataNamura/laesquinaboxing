---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.astro';
import Hero from '../components/Hero.astro';
import BoxKids from '../components/BoxKids.astro';
import BoxWomen from '../components/BoxWomen.astro';
import BoxGeneral from '../components/BoxGeneral.astro';
import Schedule from '../components/Schedule.astro';
import Trainers from '../components/Trainers.astro';
import Location from '../components/Location.astro';
import Footer from '../components/Footer.astro';
import WhatsAppFloat from '../components/WhatsAppFloat.astro';

// Detectar idioma del navegador
const browserLang = Astro.request.headers.get('accept-language') || '';
const isEnglish = browserLang.startsWith('en') || browserLang.includes('en-');
const hasVisited = Astro.cookies.get('language-preference')?.value;

// Si es la primera visita y el idioma es inglés, redirigir
if (!hasVisited && isEnglish) {
	return Astro.redirect('/en');
}
---

<Layout 
	title="La Esquina Boxing - Gimnasio de Boxeo en el Sur de Tenerife | Clases de Boxeo"
	description="La Esquina Boxing - El mejor gimnasio de boxeo en el Sur de Tenerife. Clases de boxeo para adultos, niños y mujeres. Entrena sin límites con una única cuota mensual de 40€-50€."
	keywords="boxeo sur de tenerife, gimnasio boxeo tenerife, clases boxeo sur tenerife, boxeo adultos tenerife, boxeo niños tenerife, boxeo mujeres tenerife, entrenamiento boxeo tenerife, gimnasio sur tenerife, boxeo la camella, gimnasio la camella, boxeo arona, boxeo adeje, boxeo santa cruz tenerife"
>
	<Navbar />
	<main>
		<Hero />
		<BoxGeneral />
		<BoxKids />
		<BoxWomen />
		<Schedule />
		<Trainers />
		<Location />
	</main>
	<Footer />
	<WhatsAppFloat />
</Layout>

<script>
	// Guardar preferencia de idioma cuando el usuario cambia manualmente
	document.addEventListener('DOMContentLoaded', function() {
		const languageLinks = document.querySelectorAll('.language-link');
		
		languageLinks.forEach(link => {
			link.addEventListener('click', function() {
				// Guardar preferencia en cookie
				document.cookie = 'language-preference=manual; path=/; max-age=31536000'; // 1 año
			});
		});
	});
</script>
